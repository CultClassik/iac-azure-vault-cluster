
# 172.16.15.0	172.16.15.1 - 172.16.15.62	172.16.15.63
# 172.16.15.64	172.16.15.65 - 172.16.15.126	172.16.15.127
# 172.16.15.128	172.16.15.129 - 172.16.15.190	172.16.15.191
# 172.16.15.192	172.16.15.193 - 172.16.15.254	172.16.15.255

resource "azurerm_virtual_network" "vault" {
  name                = replace(local.resource_base_name, "RESTYPE", "vnet")
  location            = azurerm_resource_group.vault.location
  resource_group_name = azurerm_resource_group.vault.name
  address_space       = ["172.16.15.0/24"]
  tags                = local.tags
}

resource "azurerm_subnet" "vault" {
  name                 = replace(local.resource_base_name, "RESTYPE", "snet")
  resource_group_name  = azurerm_resource_group.vault.name
  virtual_network_name = azurerm_virtual_network.vault.name
  address_prefixes     = ["172.16.15.0/26"]
  service_endpoints = [
    "Microsoft.KeyVault",
  ]
}
